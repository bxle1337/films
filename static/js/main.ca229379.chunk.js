(this.webpackJsonpfilms=this.webpackJsonpfilms||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(23),s=n.n(a),i=n(19),l=n.n(i),o=n(16),j=n.n(o),u=n(22),f=n(18),b=n(6),d=(n(122),n(132)),h=n(133),x=n(134),p=n(1),O=function(e){var t=e.id,n=(e.go,e.ButtonStart),c=e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),c&&Object(p.jsxs)(b.j,{children:[Object(p.jsxs)(b.p,{icon:Object(p.jsx)("img",{src:"https://i.imgur.com/uoZzj4g.png",style:{width:"50%"}}),children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",c.first_name,"! \u0425\u043e\u0447\u0435\u0448\u044c \u0431\u044b\u0441\u0442\u0440\u043e \u043d\u0430\u0439\u0442\u0438 \u043d\u0443\u0436\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c, \u043d\u043e \u043d\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u0442\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u043f\u043e\u0438\u0441\u043a? ",Object(p.jsx)("br",{}),"\u041f\u043e\u043b\u0443\u0447\u0430\u0439 \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043e\u0434\u043d\u043e\u0439 \u043a\u043d\u043e\u043f\u043a\u0438. \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u043e\u0442\u043b\u043e\u0436\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438 \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0433\u043e \u043f\u043e\u0437\u0436\u0435."]}),Object(p.jsx)(b.h,{children:n})]})]})},m=n(125),y=n(126),g=n(127),w=n(128),v=n(129),k=n(130),S=n(131),C=function(e){var t=e.id,n=(e.go,e.setPopout),c=e.TitleFilm,r=(e.SubnavigationButton,e.SubnavigationBar,e.description),a=e.Films,s=e.ButtonNext;e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c"}),a&&Object(p.jsxs)(b.h,{style:{float:"center",display:"inline-block"},children:[Object(p.jsx)("img",{style:{width:"40%",float:"left",display:"inline-block",borderRadius:10},src:a.data.posterUrl}),Object(p.jsx)(b.w,{className:"Text",style:{float:"left",width:"50%",marginLeft:16},level:"2",weight:"bold",children:c}),Object(p.jsx)(b.l,{style:{float:"left",width:"45%",whiteSpace:"nowrap",overflow:"hidden"},before:Object(p.jsx)(m.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:a.data.countries[0].country}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(y.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0413\u043e\u0434: ",a.data.year]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(g.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",a.data.filmLength]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(w.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0416\u0430\u043d\u0440: ",a.data.genres[0].genre]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(v.a,{}),textWrap:"full",textLevel:"primary",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",a.rating.rating,"/10"]})]}),a&&Object(p.jsxs)("div",{children:[Object(p.jsx)(b.s,{style:{marginTop:8}}),Object(p.jsx)(b.t,{before:Object(p.jsx)(k.a,{fill:"#fc853a"}),onClick:function(){l.a.send("VKWebAppCopyText",{text:a.data.nameRu}),n(Object(p.jsx)(b.u,{before:Object(p.jsx)(k.a,{fill:"#fc853a"}),onClose:function(){return n(null)},duration:1e3,children:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"}))},children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(p.jsx)(b.t,{style:{marginTop:-10},before:Object(p.jsx)(S.a,{fill:"#fc853a"}),onClick:function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){var t,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=save&key="+t+"&id="+a.data.filmId);case 4:return c=e.sent,e.next=7,c.json();case 7:r=e.sent,n(Object(p.jsx)(b.u,{before:Object(p.jsx)(b.c,{src:r.photo}),onClose:function(){return n(null)},duration:1e3,children:r.text}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"\u0412 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),Object(p.jsx)(b.s,{style:{marginTop:0}})]}),a&&Object(p.jsx)(b.j,{header:Object(p.jsxs)(b.k,{mode:"secondary",children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 "',a.data.nameRu,'"']}),children:Object(p.jsx)(b.h,{style:{marginBottom:"25%"},children:Object(p.jsxs)(b.v,{weight:"regular",children:[r,Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})})}),Object(p.jsx)(b.i,{vertical:"bottom",children:Object(p.jsx)(b.h,{children:s})})]})},F=function(e){var t=e.id,n=e.go,c=(e.setPopout,e.Favorites);e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{left:Object(p.jsx)(b.o,{"data-to":"home",onClick:n}),children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),c]})},B=function(){var e=Object(c.useState)("home"),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),i=Object(f.a)(s,2),o=i[0],m=i[1],y=Object(c.useState)(null),g=Object(f.a)(y,2),w=g[0],v=g[1],k=Object(c.useState)(Object(p.jsx)(b.r,{size:"large"})),S=Object(f.a)(k,2),B=S[0],L=S[1],P=Object(c.useState)(null),z=Object(f.a)(P,2),U=z[0],I=z[1],T=Object(c.useState)(null),R=Object(f.a)(T,2),W=R[0],A=R[1],E=Object(c.useState)(null),N=Object(f.a)(E,2),K=N[0],V=N[1],J=Object(c.useState)(null),Z=Object(f.a)(J,2),_=Z[0],q=Z[1],G=Object(c.useState)(null),D=Object(f.a)(G,2),H=D[0],M=D[1];Object(c.useEffect)((function(){var e=document.createAttribute("scheme");function t(){return(t=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,m(t),L(null),A(Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(b.f,{style:{marginBottom:6},children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},after:Object(p.jsx)(d.a,{fill:"#fc853a"}),centered:!0,onClick:function(){a("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(p.jsx)(b.f,{children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},id:"button",after:Object(p.jsx)(h.a,{fill:"#fc853a"}),centered:!0,onClick:function(){n()},children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"})})]})),I(Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(b.f,{style:{marginBottom:6},children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},after:Object(p.jsx)(d.a,{fill:"#fc853a"}),centered:!0,onClick:function(){a("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(p.jsx)(b.f,{children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},id:"button",after:Object(p.jsx)(h.a,{fill:"#fc853a"}),centered:!0,onClick:function(){n()},children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u0438\u043b\u044c\u043c"})})]}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return c.apply(this,arguments)}function c(){return(c=Object(u.a)(j.a.mark((function e(){var t,c,s,i,l,o,u,f,d,h,x;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("button").style.display="none",L(Object(p.jsx)(b.r,{size:"large"})),new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=6,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfilm&key="+t);case 6:return c=e.sent,e.next=9,c.json();case 9:return s=e.sent,e.next=12,s.error;case 12:if(e.t0=e.sent,"error"!==e.t0){e.next=17;break}n(),e.next=31;break;case 17:if(i=function(){var e=f.replace("...",d);V(e)},l=s.data.nameRu,q(l),l.length>20&&(l=l.substr(0,20),q(l+="...")),o=s.data.description,u=0,null!=s.data.description&&(u=o.split(" ")),f=s.data.description,V(f),u.length>25){for(f="",d="",h=0;h<25;h++)f=f+" "+u[h];for(x=25;x<u.length;x++)d=d+" "+u[x];f+="...",V(Object(p.jsxs)(r.a.Fragment,{children:[f,Object(p.jsx)("br",{}),Object(p.jsx)(b.d,{style:{marginLeft:-16,color:"#fc853a"},onClick:function(){i()},mode:"tertiary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."}),Object(p.jsx)("br",{}),Object(p.jsx)(b.j,{})]}))}v(s),a("persik"),L(null),document.getElementById("button").style.display="";case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return i.apply(this,arguments)}function i(){return(i=Object(u.a)(j.a.mark((function e(){var t,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfavorite&key="+t);case 4:return n=e.sent,e.next=7,n.json();case 7:(c=e.sent).error?M(Object(p.jsx)(b.p,{icon:Object(p.jsx)("img",{src:"https://i.imgur.com/uoZzj4g.png",style:{width:"50%"}}),children:"\u0423\u043f\u0441, \u043f\u043e\u0445\u043e\u0436\u0435 \u0443 \u0432\u0430\u0441 \u0435\u0448\u0435 \u043d\u0435\u0442 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430\u0445."})):(r=o(c),M(r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return e.map((function(e){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(b.q,{disabled:!0,multiline:!0,before:Object(p.jsx)(b.c,{size:72,mode:"image",style:{backgroundImage:"url("+e[0].photo+")",backgroundSize:72}}),caption:e[0].time,text:Object(p.jsxs)(b.e,{level:"3",style:{color:"#fc853a"},weight:"regular",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",e[0].rating]}),after:Object(p.jsx)(x.a,{onClick:function(){function t(){return(t=Object(u.a)(j.a.mark((function t(){var n,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return new URLSearchParams(window.location.search),n=btoa(window.location.search),t.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=delete&key="+n+"&id="+e[0].idfilm);case 4:return c=t.sent,t.next=7,c.json();case 7:r=t.sent,s(),L(Object(p.jsx)(b.u,{before:Object(p.jsx)(b.c,{src:r.photo}),onClose:function(){return L(null)},duration:1e3,children:r.text}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},fill:"ff4242"}),children:e[0].name}),Object(p.jsx)(b.s,{style:{marginTop:8}})]})}))}e.value="space_gray",document.body.attributes.setNamedItem(e),function(){t.apply(this,arguments)}(),s(),setInterval((function(){s()}),15e3)}),[]);var Q=function(e){a(e.currentTarget.dataset.to)};return Object(p.jsx)(b.a,{children:Object(p.jsx)(b.b,{children:Object(p.jsxs)(b.x,{activePanel:n,popout:B,children:[Object(p.jsx)(O,{id:"home",ButtonStart:W,fetchedUser:o,go:Q}),Object(p.jsx)(C,{id:"persik",setPopout:L,TitleFilm:_,description:K,Films:w,ButtonNext:U,go:Q}),Object(p.jsx)(F,{id:"FavoritesPanel",Favorites:H,setPopout:L,go:Q})]})})})};l.a.send("VKWebAppInit"),s.a.render(Object(p.jsx)(B,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.ca229379.chunk.js.map