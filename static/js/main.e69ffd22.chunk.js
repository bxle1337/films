(this.webpackJsonpfilms=this.webpackJsonpfilms||[]).push([[0],{124:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(23),r=c.n(i),s=c(12),l=c.n(s),o=c(13),j=c.n(o),d=c(20),f=c(14),b=c(3),u=(c(122),c(133)),x=c(134),p=c(1),h=function(e){var t=e.id,c=(e.go,e.ButtonStart),n=e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),n&&Object(p.jsxs)(b.j,{children:[Object(p.jsxs)(b.p,{icon:Object(p.jsx)("img",{src:"https://i.imgur.com/uoZzj4g.png",style:{width:"50%"}}),children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",n.first_name,"! \u0425\u043e\u0447\u0435\u0448\u044c \u0431\u044b\u0441\u0442\u0440\u043e \u043d\u0430\u0439\u0442\u0438 \u043d\u0443\u0436\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c, \u043d\u043e \u043d\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u0442\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u043f\u043e\u0438\u0441\u043a? ",Object(p.jsx)("br",{}),"\u041f\u043e\u043b\u0443\u0447\u0430\u0439 \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043e\u0434\u043d\u043e\u0439 \u043a\u043d\u043e\u043f\u043a\u0438. \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u043e\u0442\u043b\u043e\u0436\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438 \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0433\u043e \u043f\u043e\u0437\u0436\u0435."]}),Object(p.jsx)(b.h,{children:c})]})]})},O=c(125),m=c(126),y=c(127),g=c(128),w=c(129),v=c(130),k=c(131),S=c(132),B=function(e){var t=e.id,c=(e.go,e.setPopout),n=e.TitleFilm,a=(e.SubnavigationButton,e.SubnavigationBar,e.description),i=e.Films,r=e.ButtonNext;e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c"}),i&&Object(p.jsxs)(b.h,{style:{float:"center",display:"inline-block"},children:[Object(p.jsx)("img",{style:{width:"40%",float:"left",display:"inline-block",borderRadius:10},src:i.data.posterUrl}),Object(p.jsx)(b.w,{className:"Text",style:{float:"left",width:"50%",marginLeft:16},level:"2",weight:"bold",children:n}),Object(p.jsx)(b.l,{style:{float:"left",width:"45%",whiteSpace:"nowrap",overflow:"hidden"},before:Object(p.jsx)(O.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:i.data.countries[0].country}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(m.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0413\u043e\u0434: ",i.data.year]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(y.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",i.data.filmLength]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(g.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0416\u0430\u043d\u0440: ",i.data.genres[0].genre]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(w.a,{}),textWrap:"full",textLevel:"primary",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",i.rating.rating,"/10"]})]}),i&&Object(p.jsxs)("div",{children:[Object(p.jsx)(b.s,{style:{marginTop:8}}),Object(p.jsx)(b.t,{before:Object(p.jsx)(v.a,{fill:"#fc853a"}),onClick:function(){l.a.send("VKWebAppCopyText",{text:i.data.nameRu}),c(Object(p.jsx)(b.u,{before:Object(p.jsx)(v.a,{fill:"#fc853a"}),onClose:function(){return c(null)},duration:1e3,children:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"})),l.a.send("VKWebAppTapticNotificationOccurred",{type:"success"})},children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(p.jsx)(b.t,{style:{marginTop:-10},before:Object(p.jsx)(k.a,{fill:"#fc853a"}),onClick:function(){function e(){return(e=Object(d.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=save&key="+t+"&id="+i.data.filmId);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,c(Object(p.jsx)(b.u,{before:Object(p.jsx)(S.a,{fill:"#fc853a"}),onClose:function(){return c(null)},duration:1e3,children:a.text})),l.a.send("VKWebAppTapticNotificationOccurred",{type:"success"});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"\u0412 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),Object(p.jsx)(b.s,{style:{marginTop:0}})]}),i&&Object(p.jsx)(b.j,{header:Object(p.jsxs)(b.k,{mode:"secondary",children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 "',i.data.nameRu,'"']}),children:Object(p.jsx)(b.h,{style:{marginBottom:"25%"},children:Object(p.jsxs)(b.v,{weight:"regular",children:[a,Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})})}),Object(p.jsx)(b.i,{vertical:"bottom",children:Object(p.jsx)(b.h,{children:r})})]})},W=function(e){var t=e.id,c=e.go,n=e.setPopout,a=e.TitleFilmByid,i=(e.SubnavigationButton,e.SubnavigationBar,e.activeWindow,e.descriptionByid),r=e.FilmsByid;e.ButtonNext,e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{left:Object(p.jsx)(b.o,{"data-to":"FavoritesPanel",onClick:c}),children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),r&&Object(p.jsxs)(b.h,{style:{float:"center",display:"inline-block"},children:[Object(p.jsx)("img",{style:{width:"40%",float:"left",display:"inline-block",borderRadius:10},src:r.data.posterUrl}),Object(p.jsx)(b.w,{className:"Text",style:{float:"left",width:"50%",marginLeft:16},level:"2",weight:"bold",children:a}),Object(p.jsx)(b.l,{style:{float:"left",width:"45%",whiteSpace:"nowrap",overflow:"hidden"},before:Object(p.jsx)(O.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:r.data.countries[0].country}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(m.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0413\u043e\u0434: ",r.data.year]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(y.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",r.data.filmLength]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(g.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0416\u0430\u043d\u0440: ",r.data.genres[0].genre]}),Object(p.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(p.jsx)(w.a,{}),textWrap:"full",textLevel:"primary",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",r.rating.rating,"/10"]})]}),r&&Object(p.jsxs)("div",{children:[Object(p.jsx)(b.s,{style:{marginTop:8}}),Object(p.jsx)(b.t,{before:Object(p.jsx)(v.a,{fill:"#fc853a"}),onClick:function(){l.a.send("VKWebAppCopyText",{text:r.data.nameRu}),n(Object(p.jsx)(b.u,{before:Object(p.jsx)(v.a,{fill:"#fc853a"}),onClose:function(){return n(null)},duration:1e3,children:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"})),l.a.send("VKWebAppTapticNotificationOccurred",{type:"success"})},children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(p.jsx)(b.t,{id:r.data.idfilm,style:{marginTop:-10},before:Object(p.jsx)(k.a,{fill:"#fc853a"}),onClick:function(){function e(){return(e=Object(d.a)(j.a.mark((function e(){var t,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=delete&key="+t+"&id="+r.data.filmId);case 4:return c=e.sent,e.next=7,c.json();case 7:a=e.sent,n(Object(p.jsx)(b.u,{before:Object(p.jsx)(S.a,{fill:"#fc853a"}),onClose:function(){return n(null)},duration:1e3,children:a.text})),l.a.send("VKWebAppTapticNotificationOccurred",{type:"error"});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0437\u0430\u043a\u043b\u0430\u0434\u043e\u043a"}),Object(p.jsx)(b.s,{style:{marginTop:0}})]}),r&&Object(p.jsx)(b.j,{header:Object(p.jsxs)(b.k,{mode:"secondary",children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 "',r.data.nameRu,'"']}),children:Object(p.jsx)(b.h,{style:{marginBottom:"25%"},children:Object(p.jsxs)(b.v,{weight:"regular",children:[i,Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})})})]})},L=function(e){var t=e.id,c=e.go,n=(e.setPopout,e.Favorites),a=e.activeWindow;e.fetchedUser;return Object(p.jsxs)(b.m,{id:t,children:[Object(p.jsx)(b.n,{left:Object(p.jsx)(b.o,{"data-to":a,onClick:c}),children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),n]})},T=function(){var e=Object(n.useState)("home"),t=Object(f.a)(e,2),c=t[0],i=t[1],r=Object(n.useState)("home"),s=Object(f.a)(r,2),o=s[0],O=s[1],m=Object(n.useState)(null),y=Object(f.a)(m,2),g=y[0],w=y[1],v=Object(n.useState)(null),k=Object(f.a)(v,2),S=k[0],T=k[1],C=Object(n.useState)(null),F=Object(f.a)(C,2),P=F[0],R=F[1],U=Object(n.useState)(Object(p.jsx)(b.r,{size:"large"})),z=Object(f.a)(U,2),N=z[0],I=z[1],A=Object(n.useState)(null),K=Object(f.a)(A,2),V=K[0],E=K[1],J=Object(n.useState)(null),Z=Object(f.a)(J,2),_=Z[0],q=Z[1],G=Object(n.useState)(null),D=Object(f.a)(G,2),H=D[0],M=D[1],Q=Object(n.useState)(null),X=Object(f.a)(Q,2),Y=X[0],$=X[1],ee=Object(n.useState)(null),te=Object(f.a)(ee,2),ce=te[0],ne=te[1],ae=Object(n.useState)(null),ie=Object(f.a)(ae,2),re=ie[0],se=ie[1],le=Object(n.useState)(null),oe=Object(f.a)(le,2),je=oe[0],de=oe[1];Object(n.useEffect)((function(){var e=document.createAttribute("scheme");function t(){return(t=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,w(t),I(null),q(Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(b.f,{style:{marginBottom:6},children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},after:Object(p.jsx)(u.a,{fill:"#fc853a"}),centered:!0,onClick:function(){i("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(p.jsx)(b.f,{children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},id:"button",after:Object(p.jsx)(x.a,{fill:"#fc853a"}),centered:!0,onClick:function(){c()},children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"})})]})),E(Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(b.f,{style:{marginBottom:6},children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},after:Object(p.jsx)(u.a,{fill:"#fc853a"}),centered:!0,onClick:function(){i("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(p.jsx)(b.f,{children:Object(p.jsx)(b.g,{style:{color:"#fc853a"},id:"button",after:Object(p.jsx)(x.a,{fill:"#fc853a"}),centered:!0,onClick:function(){c()},children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u0438\u043b\u044c\u043c"})})]}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return n.apply(this,arguments)}function n(){return(n=Object(d.a)(j.a.mark((function e(){var t,n,r,s,l,o,d,f,u,x,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("button").style.display="none",I(Object(p.jsx)(b.r,{size:"large"})),new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=6,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfilm&key="+t);case 6:return n=e.sent,e.next=9,n.json();case 9:return r=e.sent,e.next=12,r.error;case 12:if(e.t0=e.sent,"error"!==e.t0){e.next=17;break}c(),e.next=32;break;case 17:if(s=function(){var e=f.replace("...",u);M(e)},l=r.data.nameRu,ne(l),l.length>20&&(l=l.substr(0,20),ne(l+="...")),o=r.data.description,d=0,null!=r.data.description&&(d=o.split(" ")),f=r.data.description,M(f),d.length>25){for(f="",u="",x=0;x<25;x++)f=f+" "+d[x];for(h=25;h<d.length;h++)u=u+" "+d[h];f+="...",M(Object(p.jsxs)(a.a.Fragment,{children:[f,Object(p.jsx)("br",{}),Object(p.jsx)(b.d,{style:{marginLeft:-16,color:"#fc853a"},onClick:function(){s()},mode:"tertiary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."}),Object(p.jsx)("br",{}),Object(p.jsx)(b.j,{})]}))}T(r),i("persik"),O("persik"),setTimeout(I(null),1500),document.getElementById("button").style.display="";case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(j.a.mark((function e(){var t,c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfavorite&key="+t);case 4:return c=e.sent,e.next=7,c.json();case 7:(n=e.sent).error?de(Object(p.jsx)(b.p,{icon:Object(p.jsx)("img",{src:"https://i.imgur.com/uoZzj4g.png",style:{width:"50%"}}),children:"\u0423\u043f\u0441, \u043f\u043e\u0445\u043e\u0436\u0435 \u0443 \u0432\u0430\u0441 \u0435\u0448\u0435 \u043d\u0435\u0442 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430\u0445."})):(a=o(n),de(a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return e.map((function(e){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(b.q,{id:e[0].idfilm,onClick:function(){function t(){return(t=Object(d.a)(j.a.mark((function e(t){var c,n,r,s,l,o,d,f,u,x,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(){var e=d.replace("...",f);$(e)},new URLSearchParams(window.location.search),c=btoa(window.location.search),e.next=5,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getbyid&key="+c+"&id="+t);case 5:return n=e.sent,e.next=8,n.json();case 8:if(r=e.sent,s=r.data.nameRu,se(s),s.length>20&&(s=s.substr(0,20),se(s+="...")),l=r.data.description,o=0,null!=r.data.description&&(o=l.split(" ")),d=r.data.description,M(d),o.length>25){for(d="",f="",u=0;u<25;u++)d=d+" "+o[u];for(x=25;x<o.length;x++)f=f+" "+o[x];d+="...",$(Object(p.jsxs)(a.a.Fragment,{children:[d,Object(p.jsx)("br",{}),Object(p.jsx)(b.d,{style:{marginLeft:-16,color:"#fc853a"},onClick:function(){h()},mode:"tertiary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."}),Object(p.jsx)("br",{}),Object(p.jsx)(b.j,{})]}))}R(r),i("byid");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(e[0].idfilm)},multiline:!0,before:Object(p.jsx)(b.c,{size:72,mode:"image",style:{backgroundImage:"url("+e[0].photo+")",backgroundSize:72}}),caption:e[0].time,text:Object(p.jsxs)(b.e,{level:"3",style:{color:"#fc853a"},weight:"regular",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",e[0].rating]}),children:e[0].name}),Object(p.jsx)(b.s,{style:{marginTop:8}})]})}))}e.value="space_gray",document.body.attributes.setNamedItem(e),function(){t.apply(this,arguments)}(),r(),setInterval((function(){r()}),15e3)}),[]);var fe=function(e){i(e.currentTarget.dataset.to)};return Object(p.jsx)(b.a,{children:Object(p.jsx)(b.b,{children:Object(p.jsxs)(b.x,{activePanel:c,popout:N,children:[Object(p.jsx)(h,{id:"home",ButtonStart:_,fetchedUser:g,go:fe}),Object(p.jsx)(B,{id:"persik",setPopout:I,TitleFilm:ce,description:H,Films:S,ButtonNext:V,go:fe}),Object(p.jsx)(W,{id:"byid",activeWindow:o,setPopout:I,TitleFilmByid:re,descriptionByid:Y,FilmsByid:P,ButtonNext:V,go:fe}),Object(p.jsx)(L,{id:"FavoritesPanel",activeWindow:o,Favorites:je,setPopout:I,go:fe})]})})})};l.a.send("VKWebAppInit"),r.a.render(Object(p.jsx)(T,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.e69ffd22.chunk.js.map