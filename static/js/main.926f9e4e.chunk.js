(this.webpackJsonpfilms=this.webpackJsonpfilms||[]).push([[0],{123:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(23),i=n.n(a),s=n(18),l=n.n(s),o=n(19),j=n.n(o),d=n(22),b=n(20),u=n(7),f=(n(121),n(131)),h=n(132),x=n(2),p=function(e){var t=e.id,n=(e.go,e.ButtonNext),c=e.fetchedUser;return Object(x.jsxs)(u.m,{id:t,children:[Object(x.jsx)(u.n,{children:"Example"}),c&&Object(x.jsx)(u.j,{header:Object(x.jsx)(u.k,{mode:"secondary",children:"User Data Fetched with VK Bridge"}),children:Object(x.jsx)(u.f,{before:c.photo_200?Object(x.jsx)(u.c,{src:c.photo_200}):null,description:c.city&&c.city.title?c.city.title:"",children:"".concat(c.first_name," ").concat(c.last_name)})}),Object(x.jsx)(u.j,{header:Object(x.jsx)(u.k,{mode:"secondary",children:"Navigation Example"}),children:Object(x.jsx)(u.h,{children:n})})]})},O=n(124),m=n(125),y=n(126),g=n(127),v=n(128),w=n(129),k=n(130),S=function(e){var t=e.id,n=(e.go,e.setPopout),c=e.TitleFilm,r=(e.SubnavigationButton,e.SubnavigationBar,e.description),a=e.Films,i=e.ButtonNext;e.fetchedUser;return Object(x.jsxs)(u.m,{id:t,children:[Object(x.jsx)(u.n,{children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c"}),a&&Object(x.jsxs)(u.h,{style:{float:"center",display:"inline-block"},children:[Object(x.jsx)("img",{style:{width:"40%",float:"left",display:"inline-block",borderRadius:10},src:a.data.posterUrl}),Object(x.jsx)(u.v,{className:"Text",style:{float:"left",width:"50%",marginLeft:16},level:"2",weight:"bold",children:c}),Object(x.jsx)(u.l,{style:{float:"left",width:"45%",whiteSpace:"nowrap",overflow:"hidden"},before:Object(x.jsx)(O.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:a.data.countries[0].country}),Object(x.jsxs)(u.l,{style:{float:"left",width:"50%"},before:Object(x.jsx)(m.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0413\u043e\u0434: ",a.data.year]}),Object(x.jsxs)(u.l,{style:{float:"left",width:"50%"},before:Object(x.jsx)(y.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",a.data.filmLength]}),Object(x.jsxs)(u.l,{style:{float:"left",width:"50%"},before:Object(x.jsx)(g.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0416\u0430\u043d\u0440: ",a.data.genres[0].genre]}),Object(x.jsxs)(u.l,{style:{float:"left",width:"50%"},before:Object(x.jsx)(v.a,{}),textWrap:"full",textLevel:"primary",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",a.rating.rating,"/10"]})]}),a&&Object(x.jsxs)("div",{children:[Object(x.jsx)(u.r,{style:{marginTop:8}}),Object(x.jsx)(u.s,{before:Object(x.jsx)(w.a,{fill:"#fc853a"}),onClick:function(){l.a.send("VKWebAppCopyText",{text:a.data.nameRu}),n(Object(x.jsx)(u.t,{before:Object(x.jsx)(w.a,{fill:"#fc853a"}),onClose:function(){return n(null)},duration:1e3,children:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"}))},children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(x.jsx)(u.s,{style:{marginTop:-10},before:Object(x.jsx)(k.a,{fill:"#fc853a"}),onClick:function(){function e(){return(e=Object(d.a)(j.a.mark((function e(){var t,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=save&key="+t+"&id="+a.data.filmId);case 4:return c=e.sent,e.next=7,c.json();case 7:r=e.sent,n(Object(x.jsx)(u.t,{before:Object(x.jsx)(u.c,{src:r.photo}),onClose:function(){return n(null)},duration:1e3,children:r.text}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"\u0412 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),Object(x.jsx)(u.r,{style:{marginTop:0}})]}),a&&Object(x.jsx)(u.j,{header:Object(x.jsxs)(u.k,{mode:"secondary",children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 "',a.data.nameRu,'"']}),children:Object(x.jsx)(u.h,{style:{marginBottom:"25%"},children:Object(x.jsxs)(u.u,{weight:"regular",children:[r,Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})})}),Object(x.jsx)(u.i,{vertical:"bottom",children:Object(x.jsx)(u.h,{children:i})})]})},F=function(e){var t=e.id,n=e.go,c=(e.setPopout,e.Favorites);e.fetchedUser;return Object(x.jsxs)(u.m,{id:t,children:[Object(x.jsx)(u.n,{left:Object(x.jsx)(u.o,{"data-to":"home",onClick:n}),children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),c]})},B=function(){var e=Object(c.useState)("home"),t=Object(b.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),s=Object(b.a)(i,2),o=s[0],O=s[1],m=Object(c.useState)(null),y=Object(b.a)(m,2),g=y[0],v=y[1],w=Object(c.useState)(Object(x.jsx)(u.q,{size:"large"})),k=Object(b.a)(w,2),B=k[0],L=k[1],P=Object(c.useState)(null),U=Object(b.a)(P,2),C=U[0],I=U[1],T=Object(c.useState)(null),W=Object(b.a)(T,2),z=W[0],N=W[1],R=Object(c.useState)(null),E=Object(b.a)(R,2),A=E[0],K=E[1],V=Object(c.useState)(null),_=Object(b.a)(V,2),q=_[0],J=_[1];Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetUserInfo");case 2:n=e.sent,O(n),L(null),I(Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)(u.e,{style:{marginBottom:6},children:Object(x.jsx)(u.g,{"data-to":"FavoritesPanel",after:Object(x.jsx)(f.a,{}),centered:!0,onClick:function(){a("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(x.jsx)(u.e,{children:Object(x.jsx)(u.g,{id:"button",after:Object(x.jsx)(h.a,{}),centered:!0,onClick:function(){t()},children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u0438\u043b\u044c\u043c"})})]}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return n.apply(this,arguments)}function n(){return(n=Object(d.a)(j.a.mark((function e(){var n,c,i,s,l,o,d,b,f,h,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("button").style.display="none",L(Object(x.jsx)(u.q,{size:"large"})),new URLSearchParams(window.location.search),n=btoa(window.location.search),e.next=6,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfilm&key="+n);case 6:return c=e.sent,e.next=9,c.json();case 9:return i=e.sent,e.next=12,i.error;case 12:if(e.t0=e.sent,"error"!==e.t0){e.next=17;break}t(),e.next=31;break;case 17:if(s=function(){var e=b.replace("...",f);N(e)},l=i.data.nameRu,K(l),l.length>20&&(l=l.substr(0,20),K(l+="...")),o=i.data.description,d=0,null!=i.data.description&&(d=o.split(" ")),b=i.data.description,N(b),d.length>25){for(b="",f="",h=0;h<25;h++)b=b+" "+d[h];for(p=25;p<d.length;p++)f=f+" "+d[p];b+="...",N(Object(x.jsxs)(r.a.Fragment,{children:[b,Object(x.jsx)("br",{}),Object(x.jsx)(u.d,{style:{marginLeft:-16},onClick:function(){s()},mode:"tertiary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."}),Object(x.jsx)("br",{}),Object(x.jsx)(u.j,{})]}))}v(i),a("persik"),L(null),document.getElementById("button").style.display="";case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return i.apply(this,arguments)}function i(){return(i=Object(d.a)(j.a.mark((function e(){var t,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfavorite&key="+t);case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,r=s(c),J(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return e.map((function(e){return Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)(u.p,{disabled:!0,multiline:!0,before:Object(x.jsx)(u.c,{size:72,mode:"image",style:{backgroundImage:"url("+e[0].photo+")",backgroundSize:72}}),caption:e[0].time,after:"+ 1 500 \u20bd",actions:Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)(u.d,{mode:"tertiary",children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(x.jsx)(u.d,{mode:"tertiary",hasHover:!1,children:"\u041d\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043f\u043e\u0437\u0436\u0435"})]}),children:e[0].name}),Object(x.jsx)(u.r,{style:{marginTop:8}})]})}))}l.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=c.scheme?c.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}(),c(),setInterval((function(){c()}),15e3)}),[]);var D=function(e){a(e.currentTarget.dataset.to)};return Object(x.jsx)(u.a,{children:Object(x.jsx)(u.b,{children:Object(x.jsxs)(u.w,{activePanel:n,popout:B,children:[Object(x.jsx)(p,{id:"home",ButtonNext:C,fetchedUser:o,go:D}),Object(x.jsx)(S,{id:"persik",setPopout:L,TitleFilm:A,description:z,Films:g,ButtonNext:C,go:D}),Object(x.jsx)(F,{id:"FavoritesPanel",Favorites:q,setPopout:L,go:D})]})})})};l.a.send("VKWebAppInit"),i.a.render(Object(x.jsx)(B,{}),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.926f9e4e.chunk.js.map