(this.webpackJsonpfilms=this.webpackJsonpfilms||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(23),i=n.n(r),s=n(19),l=n.n(s),o=n(12),j=n.n(o),f=n(20),d=n(13),b=n(3),u=(n(122),n(133)),x=n(134),h=n(135),p=n(132),O=n(1),m=function(e){var t=e.id,n=(e.go,e.ButtonStart),c=e.fetchedUser;return Object(O.jsxs)(b.m,{id:t,children:[Object(O.jsx)(b.n,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),c&&Object(O.jsxs)(b.j,{children:[Object(O.jsxs)(b.p,{icon:Object(O.jsx)("img",{src:"https://i.imgur.com/uoZzj4g.png",style:{width:"50%"}}),children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",c.first_name,"! \u0425\u043e\u0447\u0435\u0448\u044c \u0431\u044b\u0441\u0442\u0440\u043e \u043d\u0430\u0439\u0442\u0438 \u043d\u0443\u0436\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c, \u043d\u043e \u043d\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u0442\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u043f\u043e\u0438\u0441\u043a? ",Object(O.jsx)("br",{}),"\u041f\u043e\u043b\u0443\u0447\u0430\u0439 \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043e\u0434\u043d\u043e\u0439 \u043a\u043d\u043e\u043f\u043a\u0438. \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u043e\u0442\u043b\u043e\u0436\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438 \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0433\u043e \u043f\u043e\u0437\u0436\u0435."]}),Object(O.jsx)(b.h,{children:n})]})]})},y=n(125),g=n(126),w=n(127),v=n(128),k=n(129),S=n(130),B=n(131),L=function(e){var t=e.id,n=(e.go,e.setPopout),c=e.TitleFilm,a=(e.SubnavigationButton,e.SubnavigationBar,e.description),r=e.Films,i=e.ButtonNext;e.fetchedUser;return Object(O.jsxs)(b.m,{id:t,children:[Object(O.jsx)(b.n,{children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c"}),r&&Object(O.jsxs)(b.h,{style:{float:"center",display:"inline-block"},children:[Object(O.jsx)("img",{style:{width:"40%",float:"left",display:"inline-block",borderRadius:10},src:r.data.posterUrl}),Object(O.jsx)(b.w,{className:"Text",style:{float:"left",width:"50%",marginLeft:16},level:"2",weight:"bold",children:c}),Object(O.jsx)(b.l,{style:{float:"left",width:"45%",whiteSpace:"nowrap",overflow:"hidden"},before:Object(O.jsx)(y.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:r.data.countries[0].country}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(g.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0413\u043e\u0434: ",r.data.year]}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(w.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",r.data.filmLength]}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(v.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0416\u0430\u043d\u0440: ",r.data.genres[0].genre]}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(k.a,{}),textWrap:"full",textLevel:"primary",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",r.rating.rating,"/10"]})]}),r&&Object(O.jsxs)("div",{children:[Object(O.jsx)(b.s,{style:{marginTop:8}}),Object(O.jsx)(b.t,{before:Object(O.jsx)(S.a,{fill:"#fc853a"}),onClick:function(){l.a.send("VKWebAppCopyText",{text:r.data.nameRu}),n(Object(O.jsx)(b.u,{before:Object(O.jsx)(S.a,{fill:"#fc853a"}),onClose:function(){return n(null)},duration:1e3,children:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"}))},children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(O.jsx)(b.t,{style:{marginTop:-10},before:Object(O.jsx)(B.a,{fill:"#fc853a"}),onClick:function(){function e(){return(e=Object(f.a)(j.a.mark((function e(){var t,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=save&key="+t+"&id="+r.data.filmId);case 4:return c=e.sent,e.next=7,c.json();case 7:a=e.sent,n(Object(O.jsx)(b.u,{before:Object(O.jsx)(p.a,{fill:"#fc853a"}),onClose:function(){return n(null)},duration:1e3,children:a.text}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"\u0412 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),Object(O.jsx)(b.s,{style:{marginTop:0}})]}),r&&Object(O.jsx)(b.j,{header:Object(O.jsxs)(b.k,{mode:"secondary",children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 "',r.data.nameRu,'"']}),children:Object(O.jsx)(b.h,{style:{marginBottom:"25%"},children:Object(O.jsxs)(b.v,{weight:"regular",children:[a,Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]})})}),Object(O.jsx)(b.i,{vertical:"bottom",children:Object(O.jsx)(b.h,{children:i})})]})},C=function(e){var t=e.id,n=e.go,c=e.setPopout,a=e.TitleFilmByid,r=(e.SubnavigationButton,e.SubnavigationBar,e.activeWindow,e.descriptionByid),i=e.FilmsByid;e.ButtonNext,e.fetchedUser;return Object(O.jsxs)(b.m,{id:t,children:[Object(O.jsx)(b.n,{left:Object(O.jsx)(b.o,{"data-to":"FavoritesPanel",onClick:n}),children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),i&&Object(O.jsxs)(b.h,{style:{float:"center",display:"inline-block"},children:[Object(O.jsx)("img",{style:{width:"40%",float:"left",display:"inline-block",borderRadius:10},src:i.data.posterUrl}),Object(O.jsx)(b.w,{className:"Text",style:{float:"left",width:"50%",marginLeft:16},level:"2",weight:"bold",children:a}),Object(O.jsx)(b.l,{style:{float:"left",width:"45%",whiteSpace:"nowrap",overflow:"hidden"},before:Object(O.jsx)(y.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:i.data.countries[0].country}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(g.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0413\u043e\u0434: ",i.data.year]}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(w.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",i.data.filmLength]}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(v.a,{fill:"#fc853a"}),textWrap:"full",textLevel:"primary",children:["\u0416\u0430\u043d\u0440: ",i.data.genres[0].genre]}),Object(O.jsxs)(b.l,{style:{float:"left",width:"50%"},before:Object(O.jsx)(k.a,{}),textWrap:"full",textLevel:"primary",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",i.rating.rating,"/10"]})]}),i&&Object(O.jsxs)("div",{children:[Object(O.jsx)(b.s,{style:{marginTop:8}}),Object(O.jsx)(b.t,{before:Object(O.jsx)(S.a,{fill:"#fc853a"}),onClick:function(){l.a.send("VKWebAppCopyText",{text:i.data.nameRu}),c(Object(O.jsx)(b.u,{before:Object(O.jsx)(S.a,{fill:"#fc853a"}),onClose:function(){return c(null)},duration:1e3,children:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"}))},children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(O.jsx)(b.t,{style:{marginTop:-10},before:Object(O.jsx)(B.a,{fill:"#fc853a"}),onClick:function(){function e(){return(e=Object(f.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=delete&key="+t+"&id="+i.data.filmId);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,c(Object(O.jsx)(b.u,{before:Object(O.jsx)(p.a,{fill:"#fc853a"}),onClose:function(){return c(null)},duration:1e3,children:a.text}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0437\u0430\u043a\u043b\u0430\u0434\u043e\u043a"}),Object(O.jsx)(b.s,{style:{marginTop:0}})]}),i&&Object(O.jsx)(b.j,{header:Object(O.jsxs)(b.k,{mode:"secondary",children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 "',i.data.nameRu,'"']}),children:Object(O.jsx)(b.h,{style:{marginBottom:"25%"},children:Object(O.jsxs)(b.v,{weight:"regular",children:[r,Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]})})})]})},F=function(e){var t=e.id,n=e.go,c=(e.setPopout,e.Favorites),a=e.activeWindow;e.fetchedUser;return Object(O.jsxs)(b.m,{id:t,children:[Object(O.jsx)(b.n,{left:Object(O.jsx)(b.o,{"data-to":a,onClick:n}),children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"}),c]})},W=function(){var e=Object(c.useState)("home"),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)("home"),s=Object(d.a)(i,2),o=s[0],y=s[1],g=Object(c.useState)(null),w=Object(d.a)(g,2),v=w[0],k=w[1],S=Object(c.useState)(null),B=Object(d.a)(S,2),W=B[0],P=B[1],T=Object(c.useState)(null),R=Object(d.a)(T,2),U=R[0],z=R[1],I=Object(c.useState)(Object(O.jsx)(b.r,{size:"large"})),N=Object(d.a)(I,2),A=N[0],E=N[1],K=Object(c.useState)(null),V=Object(d.a)(K,2),J=V[0],Z=V[1],_=Object(c.useState)(null),q=Object(d.a)(_,2),G=q[0],D=q[1],H=Object(c.useState)(null),M=Object(d.a)(H,2),Q=M[0],X=M[1],Y=Object(c.useState)(null),$=Object(d.a)(Y,2),ee=$[0],te=$[1],ne=Object(c.useState)(null),ce=Object(d.a)(ne,2),ae=ce[0],re=ce[1],ie=Object(c.useState)(null),se=Object(d.a)(ie,2),le=se[0],oe=se[1],je=Object(c.useState)(null),fe=Object(d.a)(je,2),de=fe[0],be=fe[1];Object(c.useEffect)((function(){var e=document.createAttribute("scheme");function t(){return(t=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,k(t),E(null),D(Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(b.f,{style:{marginBottom:6},children:Object(O.jsx)(b.g,{style:{color:"#fc853a"},after:Object(O.jsx)(u.a,{fill:"#fc853a"}),centered:!0,onClick:function(){r("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(O.jsx)(b.f,{children:Object(O.jsx)(b.g,{style:{color:"#fc853a"},id:"button",after:Object(O.jsx)(x.a,{fill:"#fc853a"}),centered:!0,onClick:function(){n()},children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"})})]})),Z(Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(b.f,{style:{marginBottom:6},children:Object(O.jsx)(b.g,{style:{color:"#fc853a"},after:Object(O.jsx)(u.a,{fill:"#fc853a"}),centered:!0,onClick:function(){r("FavoritesPanel")},children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(O.jsx)(b.f,{children:Object(O.jsx)(b.g,{style:{color:"#fc853a"},id:"button",after:Object(O.jsx)(x.a,{fill:"#fc853a"}),centered:!0,onClick:function(){n()},children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u0438\u043b\u044c\u043c"})})]}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return c.apply(this,arguments)}function c(){return(c=Object(f.a)(j.a.mark((function e(){var t,c,i,s,l,o,f,d,u,x,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("button").style.display="none",E(Object(O.jsx)(b.r,{size:"large"})),new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=6,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfilm&key="+t);case 6:return c=e.sent,e.next=9,c.json();case 9:return i=e.sent,e.next=12,i.error;case 12:if(e.t0=e.sent,"error"!==e.t0){e.next=17;break}n(),e.next=32;break;case 17:if(s=function(){var e=d.replace("...",u);X(e)},l=i.data.nameRu,re(l),l.length>20&&(l=l.substr(0,20),re(l+="...")),o=i.data.description,f=0,null!=i.data.description&&(f=o.split(" ")),d=i.data.description,X(d),f.length>25){for(d="",u="",x=0;x<25;x++)d=d+" "+f[x];for(h=25;h<f.length;h++)u=u+" "+f[h];d+="...",X(Object(O.jsxs)(a.a.Fragment,{children:[d,Object(O.jsx)("br",{}),Object(O.jsx)(b.d,{style:{marginLeft:-16,color:"#fc853a"},onClick:function(){s()},mode:"tertiary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."}),Object(O.jsx)("br",{}),Object(O.jsx)(b.j,{})]}))}P(i),r("persik"),y("persik"),setTimeout(E(null),1500),document.getElementById("button").style.display="";case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return s.apply(this,arguments)}function s(){return(s=Object(f.a)(j.a.mark((function e(){var t,n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new URLSearchParams(window.location.search),t=btoa(window.location.search),e.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getfavorite&key="+t);case 4:return n=e.sent,e.next=7,n.json();case 7:(c=e.sent).error?be(Object(O.jsx)(b.p,{icon:Object(O.jsx)("img",{src:"https://i.imgur.com/uoZzj4g.png",style:{width:"50%"}}),children:"\u0423\u043f\u0441, \u043f\u043e\u0445\u043e\u0436\u0435 \u0443 \u0432\u0430\u0441 \u0435\u0448\u0435 \u043d\u0435\u0442 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430\u0445."})):(a=o(c),be(a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return e.map((function(e){return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(b.q,{onClick:function(){function t(){return(t=Object(f.a)(j.a.mark((function e(t){var n,c,i,s,l,o,f,d,u,x,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(){var e=f.replace("...",d);te(e)},new URLSearchParams(window.location.search),n=btoa(window.location.search),e.next=5,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=getbyid&key="+n+"&id="+t);case 5:return c=e.sent,e.next=8,c.json();case 8:if(i=e.sent,s=i.data.nameRu,oe(s),s.length>20&&(s=s.substr(0,20),oe(s+="...")),l=i.data.description,o=0,null!=i.data.description&&(o=l.split(" ")),f=i.data.description,X(f),o.length>25){for(f="",d="",u=0;u<25;u++)f=f+" "+o[u];for(x=25;x<o.length;x++)d=d+" "+o[x];f+="...",te(Object(O.jsxs)(a.a.Fragment,{children:[f,Object(O.jsx)("br",{}),Object(O.jsx)(b.d,{style:{marginLeft:-16,color:"#fc853a"},onClick:function(){h()},mode:"tertiary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."}),Object(O.jsx)("br",{}),Object(O.jsx)(b.j,{})]}))}z(i),r("byid");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(e[0].idfilm)},multiline:!0,before:Object(O.jsx)(b.c,{size:72,mode:"image",style:{backgroundImage:"url("+e[0].photo+")",backgroundSize:72}}),caption:e[0].time,text:Object(O.jsxs)(b.e,{level:"3",style:{color:"#fc853a"},weight:"regular",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",e[0].rating]}),after:Object(O.jsx)(h.a,{onClick:function(){function t(){return(t=Object(f.a)(j.a.mark((function t(){var n,c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return new URLSearchParams(window.location.search),n=btoa(window.location.search),t.next=4,fetch("https://simpletraffic.xyz/vkapi/kino.php?action=delete&key="+n+"&id="+e[0].idfilm);case 4:return c=t.sent,t.next=7,c.json();case 7:a=t.sent,i(),E(Object(O.jsx)(b.u,{before:Object(O.jsx)(p.a,{fill:"#fc853a"}),onClose:function(){return E(null)},duration:1e3,children:a.text}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},fill:"ff4242"}),children:e[0].name}),Object(O.jsx)(b.s,{style:{marginTop:8}})]})}))}e.value="space_gray",document.body.attributes.setNamedItem(e),function(){t.apply(this,arguments)}(),i(),setInterval((function(){i()}),15e3)}),[]);var ue=function(e){r(e.currentTarget.dataset.to)};return Object(O.jsx)(b.a,{children:Object(O.jsx)(b.b,{children:Object(O.jsxs)(b.x,{activePanel:n,popout:A,children:[Object(O.jsx)(m,{id:"home",ButtonStart:G,fetchedUser:v,go:ue}),Object(O.jsx)(L,{id:"persik",setPopout:E,TitleFilm:ae,description:Q,Films:W,ButtonNext:J,go:ue}),Object(O.jsx)(C,{id:"byid",activeWindow:o,setPopout:E,TitleFilmByid:le,descriptionByid:ee,FilmsByid:U,ButtonNext:J,go:ue}),Object(O.jsx)(F,{id:"FavoritesPanel",activeWindow:o,Favorites:de,setPopout:E,go:ue})]})})})};l.a.send("VKWebAppInit"),i.a.render(Object(O.jsx)(W,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.3aef0804.chunk.js.map